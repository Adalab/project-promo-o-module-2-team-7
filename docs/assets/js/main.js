"use strict";const legends=document.querySelectorAll(".js-legend");function legendHandler(e){const t=e.target.children[1];collapse(e),t.classList.toggle("legend__arrow--up")}function collapse(e){e.currentTarget.nextElementSibling.classList.toggle("collapsed")}legends.forEach(e=>e.addEventListener("click",legendHandler));const colorOptions=document.querySelectorAll(".design__radio"),icon=document.querySelectorAll(".icon-js"),tinyRectangle=document.querySelector(".rectangle-js"),fullName=document.querySelector(".fullname-js"),cardIcons=document.querySelectorAll(".cardicon-js");function handleChangeColorCard(e){const t=e.target.id;"blue-green"===t?(tinyRectangle.classList.remove("rectanglered"),tinyRectangle.classList.remove("rectanglemix"),tinyRectangle.classList.add("rectangleblue"),fullName.classList.remove("namered"),fullName.classList.remove("namemix"),fullName.classList.add("nameblue")):"red-orange"===t?(tinyRectangle.classList.remove("rectangleblue"),tinyRectangle.classList.remove("rectanglemix"),tinyRectangle.classList.add("rectanglered"),fullName.classList.remove("namemix"),fullName.classList.remove("nameblue"),fullName.classList.add("namered")):"color-mix"===t&&(tinyRectangle.classList.remove("rectangleblue"),tinyRectangle.classList.remove("rectanglered"),tinyRectangle.classList.add("rectanglemix"),fullName.classList.remove("namered"),fullName.classList.remove("nameblue"),fullName.classList.add("namemix"));for(const e of icon)"blue-green"===t?(e.classList.remove("mixiconcircle"),e.classList.remove("rediconcircle"),e.classList.add("blueiconcircle")):"red-orange"===t?(e.classList.remove("mixiconcircle"),e.classList.remove("iconbluecircle"),e.classList.add("rediconcircle")):"color-mix"===t&&(e.classList.remove("rediconcircle"),e.classList.remove("iconbluecircle"),e.classList.add("mixiconcircle"));for(const e of cardIcons)"blue-green"===t?(e.classList.remove("redicon"),e.classList.remove("mixicon"),e.classList.add("blueicon")):"red-orange"===t?(e.classList.remove("blueicon"),e.classList.remove("mixicon"),e.classList.add("redicon")):"color-mix"===t&&(e.classList.remove("redicon"),e.classList.remove("iblueicon"),e.classList.add("mixicon"))}for(const e of colorOptions)e.addEventListener("click",handleChangeColorCard);const nameInput=document.querySelector(".js-fullname"),nameCard=document.querySelector(".js-nameInput"),jobInput=document.querySelector(".js-job"),jobCard=document.querySelector(".js-jobInput"),emailInput=document.querySelector(".js-email"),emailPreview=document.querySelector(".js_preview_email"),allInput=document.querySelectorAll(".fill__input-js");let data={palette:"1",name:"",job:"",phone:"",email:"",linkedin:"",github:"",photo:""};function getPalette(){document.getElementsByName("color-palet").forEach(e=>{e.addEventListener("change",()=>{e.checked&&(data.palette=e.value)})})}function getUserData(e){let t=e.currentTarget.name,a=e.currentTarget.value;"name"===t?""===nameInput.value?nameCard.innerHTML="Nombre Apellido":(data.name=a,nameCard.innerHTML=data.name):"job"===t?""===jobInput.value?jobCard.innerHTML="Front-end developer":(data.job=a,jobCard.innerHTML=data.job):"phone"===t?data.phone=a:"email"===t?(data.email=a,emailPreview.href="mailto:"+a):"linkedin"===t?data.linkedin=a:"github"===t&&(data.github=a),getPalette(),setLocalStorage()}function handleInputData(e){e.preventDefault(),getUserData(e)}for(const e of allInput)e.addEventListener("keyup",handleInputData);const resetBtn=document.querySelector(".js-resetBtn");function setLocalStorage(){localStorage.setItem("data",JSON.stringify(data))}resetBtn.addEventListener("click",()=>{nameCard.innerHTML="Nombre Apellido",jobCard.innerHTML="Front-end developer"});const fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result}function fakeFileClick(){fileField.click()}fileField.addEventListener("change",getImage);const shareCreationLink=document.querySelector(".js-shareCreationLink"),twitterHref=document.querySelector(".share_creation__twitter");function sendUserInfo(){fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{if(!0===e.success)shareCreationLink.href=e.cardURL,shareCreationLink.innerText=e.cardURL,twitterHref.href="https://twitter.com/intent/tweet?text=%C2%A1Comparte%20esta%20tarjeta%20super%20molona%21&url="+e.cardURL;else{const e=document.querySelector(".share_creation__title"),t=document.querySelectorAll(".js-share-RRSS");for(const e of t)e.classList.add("collapsed"),console.log(e);e.innerHTML="¡Error!",shareCreationLink.innerHTML="Por favor, asegúrese de que ha cumplimentado todos los campos"}})}const sharebutton=document.querySelector(".share_button__item"),sharecreation=document.querySelector(".share_creation ");function handleButtonClick(e){e.preventDefault(),sendUserInfo(),changeColor()}function changeColor(){sharebutton.classList.toggle("sharebuttongrey"),sharecreation.classList.toggle("collapsed")}sharebutton.addEventListener("click",handleButtonClick);